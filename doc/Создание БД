CREATE TABLE AUTHORS( 
   ID INT AUTO_INCREMENT PRIMARY KEY,
   NAME VARCHAR(20) NOT NULL,
   SURNAME VARCHAR(20) NOT NULL,
   PATRONYMIC VARCHAR(20) NOT NULL 
);

CREATE TABLE BOOKS( 
   ID INT AUTO_INCREMENT PRIMARY KEY,
   TITLE VARCHAR(50) NOT NULL,
   DATE_OF_PUBLICATION DATE NOT NULL,
   NUMBER_OF_COPIES INT
);

ALTER TABLE BOOKS ADD CONSTRAINT BOOK_UNIQUE UNIQUE(TITLE ,DATE_OF_PUBLICATION);


CREATE TABLE LINCS_AUTOR_BOOK( 
   BOOK_ID INT NOT NULL,
   AUTHOR_ID INT NOT NULL
);

ALTER TABLE LINCS_AUTOR_BOOK ADD PRIMARY KEY (BOOK_ID, AUTHOR_ID);

CREATE TABLE READERS( 
   ID INT AUTO_INCREMENT PRIMARY KEY,
   NAME VARCHAR(20) NOT NULL,
   SURNAME VARCHAR(20) NOT NULL,
   PATRONYMIC VARCHAR(20) NOT NULL,
   SEX VARCHAR(1) NOT NULL,
   BIRTHDAY DATE NOT NULL
);

ALTER TABLE READERS ADD CONSTRAINT READER_UNIQUE UNIQUE(NAME, SURNAME, PATRONYMIC, BIRTHDAY);
ALTER TABLE READERS ADD CONSTRAINT SEX_CHECK CHECK (SEX IN ('M','F'));

CREATE TABLE BOOKS_ISSUE_JN( 
   READER_ID INT NOT NULL,
   BOOK_ID INT NOT NULL,
   DATE_OF_ISSUE DATE NOT NULL,
   DATE_OF_RETURN DATE
);

ALTER TABLE BOOKS_ISSUE_JN ADD PRIMARY KEY (READER_ID , BOOK_ID ,DATE_OF_ISSUE );

